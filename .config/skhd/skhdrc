#!/usr/bin/env sh

############
# Layer - Most used actions 
# Keys: ctrl / ctrl + shift
# ---------------------------
# Updated for AeroSpace instead of yabai
# 1. Jumping between windows (Mac, Tmux, Vim)
# 2. Swapping windows
# 3. Opening up applications
# 4. Making a window fullscreen 
# 5. Layout management
#
###########

# Toggle between layouts (simplified for AeroSpace)
ctrl + cmd - t : aerospace layout tiles

# Changing Window Focus with Ctrl+hjkl - Smart navigation for terminals
ctrl - h [
  *                 : aerospace focus left
  "kitty"           ~
  "Alacritty"       ~
]
ctrl - j [
  *                 : aerospace focus down
  "kitty"           ~
  "Alacritty"       ~
]
ctrl - k [
  *                 : aerospace focus up
  "kitty"           ~
  "Alacritty"       ~
]
ctrl - l [
  *                 : aerospace focus right
  "kitty"           ~
  "Alacritty"       ~
]

# Fullscreen toggle
ctrl - f : aerospace fullscreen

# Balance/rebalance (not directly applicable to AeroSpace, but keep for consistency)
ctrl - i : echo "Balance not applicable to AeroSpace"

# Open Chrome
ctrl + cmd - c : open -na "Google Chrome" --args --new-window

# Dropdown terminal (keep your existing script)
ctrl - m: source ~/.zshrc && skhd_ddterm

# Swapping/Moving windows
ctrl + shift - h : aerospace move left
ctrl + shift - j : aerospace move down
ctrl + shift - k : aerospace move up
ctrl + shift - l : aerospace move right

# Layout management
alt - 0x2C : aerospace layout tiles horizontal vertical  # comma (,)
alt - 0x2B : aerospace layout accordion horizontal vertical  # period (.)

# Focus back and forth
alt - o : aerospace focus-back-and-forth

# Resize windows
alt + shift - 0x1B : aerospace resize smart -50  # minus key (-)
alt + shift - 0x18 : aerospace resize smart +50  # equal key (=)

# Workspaces
alt - q : aerospace workspace q
alt - w : aerospace workspace w
alt - f : aerospace workspace f
alt - p : aerospace workspace p
alt - g : aerospace workspace g

# Move windows to workspaces
cmd + alt - q : aerospace move-node-to-workspace q
cmd + alt - w : aerospace move-node-to-workspace w
cmd + alt - f : aerospace move-node-to-workspace f
cmd + alt - p : aerospace move-node-to-workspace p
cmd + alt - g : aerospace move-node-to-workspace g

# App shortcuts (from your AeroSpace config)
cmd + ctrl - a : open -a "Alacritty"
cmd + ctrl - p : open -a "Basecamp"
cmd + ctrl - o : open -a "Obsidian"
cmd + ctrl - t : open -a "kitty"
cmd + ctrl - b : open -a "Safari"
cmd + ctrl - m : open -a "Music"
cmd + ctrl - d : open -a "System Settings"

# Workspace switching
cmd + ctrl - 0x21 : aerospace workspace --wrap-around prev  # left bracket ([)
cmd + ctrl - 0x1E : aerospace workspace --wrap-around next  # right bracket (])

# Window cycling in workspace
cmd + alt - 0x21 : aerospace focus --boundaries workspace --boundaries-action wrap-around-the-workspace dfs-prev  # left bracket ([)
cmd + alt - 0x1E : aerospace focus --boundaries workspace --boundaries-action wrap-around-the-workspace dfs-next  # right bracket (])

# Back and forth workspace
alt - return : aerospace workspace-back-and-forth

# Service mode shortcuts (equivalent to AeroSpace service mode)
alt + shift - 0x29 : echo "Service mode - use individual shortcuts instead"  # semicolon (;)
# These replace the service mode bindings:
# Reload config (was service mode + esc)
cmd + shift - r : aerospace reload-config
# Flatten workspace tree (was service mode + r)  
cmd + shift - f : aerospace flatten-workspace-tree
# Toggle floating/tiling (was service mode + f)
cmd + shift - t : aerospace layout floating tiling
# Close all but current (was service mode + backspace)
cmd + shift - backspace : aerospace close-all-windows-but-current

# Join with adjacent windows (use alt + shift instead)
alt + shift - h : aerospace join-with left
alt + shift - j : aerospace join-with down
alt + shift - k : aerospace join-with up
alt + shift - l : aerospace join-with right

############################################
### Layer - Run Custom Scripts Layer (preserved from original)
### Mod: ctrl + cmd / ctrl + cmd + shift
############################################

### Kitty
# Kitty full instance
ctrl + cmd - k : open /Applications/kitty.app -n --args --single-instance --instance-group "QuickFullKitty"

### Email Coms - Open up all important email views with one shortcut
ctrl + cmd - e : source ~/.zshrc && open_all_mail_filter_links

### Flow app timer: https://www.flow.app/help#documentation
#start
ctrl + cmd - l : osascript -e 'tell application "Flow" to start'
#stop
ctrl + cmd - u : osascript -e 'tell application "Flow" to stop'
#skip
ctrl + cmd - y : osascript -e 'tell application "Flow" to skip'